<div ng-controller="Impersonator.User.Controller as vm">
  <umb-box ng-if="vm.isImpersonating && !vm.isLoading">
    <umb-box-content>
      <div class="mb2">
        <localize key="impersonator_impersonatingDescription"
          >You are impersonating the current user.</localize
        >
      </div>
      <div class="text-right">
        <umb-button
          type="button"
          action="vm.endImpersonation()"
          label-key="impersonator_endImpersonation"
          button-style="primary"
          state="vm.endImpersonationButtonState"
        ></umb-button>
      </div>
    </umb-box-content>
  </umb-box>
  <umb-box
    ng-if="vm.canImpersonateUsers && !vm.isImpersonating && !vm.isLoading"
  >
    <umb-box-content>
      <div class="flex">
        <select
          class="umb-dropdown flx-g1 mb0"
          ng-options="user as user.name for user in vm.users track by user.id"
          ng-model="vm.userToImpersonate"
        ></select>
        <umb-button
          type="button"
          action="vm.impersonateUser()"
          label-key="impersonator_impersonate"
          button-style="primary"
          state="vm.impersonateUserButtonState"
        ></umb-button>
      </div>
    </umb-box-content>
  </umb-box>
</div>
